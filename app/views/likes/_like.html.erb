<% if micropost.liked?(current_user) %>
  <%= form_for(micropost.likes.find_by(user_id: current_user.id), method: :delete, remote: true) do |f| %>
    <%= button_tag type: 'submit', class: "btn-like clear-decoration" do %>
      <i class="fas fa-heart fa-fw liked-heart"></i>
    <% end %>
    <span class="text-muted"><%= micropost.likes.count %></span>
  <% end %>
<% else %>
  <%= form_for(micropost.likes.build, remote: true) do |f| %>
    <div><%= hidden_field_tag :micropost_id, micropost.id %>
    <%= button_tag type: 'submit', class: "btn-like clear-decoration" do %>
      <i class="fas fa-heart fa-fw text-muted muted-heart"></i>
    <% end %>
    <span class="text-muted"><%= micropost.likes.count %></span>
  <% end %>
<% end %>

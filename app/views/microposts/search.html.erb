<div class="container">
<form class="mb-2 ml-5">
  <div class="form-row">
      <%= search_form_for(@q, url: search_microposts_path)  do |f| %>
        <div class="input-field col s3">
          <%= f.label :content_cont, "投稿内容" %>
          <%= f.search_field :content_cont, autocomplete: "off" %>
        </div>
        <div class="input-field col s3">
          <%= f.label :content_cont, "エリア" %>
          <%= f.search_field :address_cont, autocomplete: "off" %>
        </div>
        <div class="input-field col s6">
          <%= f.select :budget, Micropost.budgets.keys.map {|k| [I18n.t("enums.micropost.budget.#{k}"), k]} %>
          <%= f.label :budget %>
        </div>
        <% if user_signed_in? %>
          <div class="input-field col s6">
            <%= f.select :sorts, { 'いいねの多い順': 'likes_count desc' }, { include_blank: "並べ替え" } %>
          </div>
        <% end %>
        <div>
          <button class="btn black mt-4" type="submit" name="action">検索</button>
        </div>
      <% end %>
</div>

<%# <div class="container"> %>
  <% if @microposts.any? %>
    <div class="row search-posts">
      <% @microposts.each do |micropost| %>
        <div class="card-group col-md-6 mx-auto post-cards">
          <div class="card shadow-sm mb-2">
            <% if micropost.image.url %>
              <%= link_to image_tag(micropost.image.to_s, class: "card-img-top stretched-link", alt: "投稿画像"), micropost %>
            <% end %>
            <div class="card-body">
              <div class="post-user">
                <% if micropost.user.avatar? %>
                  <%= link_to image_tag(micropost.user.avatar.to_s, size: "40x40", class: "post-avatar rounded-circle mb-3", alt: "avatar image"), micropost.user %>
                <% else %>
                  <%= link_to image_tag('no_avatar.png', size: "40x40", class: "post-avatar rounded-circle mb-3", alt: "avatar image"), micropost.user %>
                <% end %>
                <%= link_to micropost.user.name, micropost.user, class: "post-avatar post-name text-dark" %>
                <% if micropost.address %>
                  <small class="post-address ml-2"><%= micropost.address %></small>
                <% end %>
                <% if micropost.arrived_at == 'day' %>
                  <span style="color: Tomato">
                    <i class="fas fa-sun arrived-icon"></i>
                  </span>
                <% elsif micropost.arrived_at == 'night' %>
                  <span style="color: Darkblue">
                    <i class="fas fa-moon arrived-icon"></i>
                  <span>
                <% else %>
                  <div></div>
                <% end %>
              </div>
              <div class="post-content ml-2 mt-1 mb-4">
                <%= micropost.content %>
              </div>
              <div class="mt-2 ml-2 mb-3">
                <%= render 'microposts/tag_list', tag_list: micropost.tag_list %>
              </div>
              <div class="post-info ml-2 d-flex">
                <div id="micropost-<%= micropost.id %>">
                    <%= render "likes/like", micropost: micropost %>
                  </div>
                  <div class="comment-info ml-3 text-muted">
                    <i class="material-icons gray-text text-darken-2">chat_bubble_outline</i>
                    <%= micropost.commented_users.count %>
                  </div>
                  <div class="ml-auto"><small class="text-muted float-right"><%= micropost.created_at.strftime('%m/%d %H:%M') %></small></div>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="search-next">
      <%= paginate @microposts %>
    </div>
  <% else %>
    <div class="no-content-info mt-5">
      <div class="text-center font-weight-bold">
        検索条件に合う投稿は0件です。
      </div>
      <div class="text-muted text-center">
        検索条件を変更して、再度お試しください。
      </div>
    </div>
  <% end %>
<%# </div> %>

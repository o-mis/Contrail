<div class="container mb-4">
  <div class="d-flex flex-row">
    <div class="flex-fill">
      <%= search_form_for(@q, url: search_microposts_path)  do |f| %>
        <%= f.search_field :content_cont, class: "search-form form-control rounded-sm text-center", placeholder: "投稿を検索..." %>
      <% end %>
    </div>
    <div class="flex-fill ml-4">
      <%= link_to search_users_path, class: "btn btn-outline-secondary w-100 search-from-u text-decoration-none" do %>
        ユーザーを検索
      <% end %>
    </div>
  </div>
</div>

<div class="container">
  <% if @microposts.any? %>
    <div class="row search-posts">
      <% @microposts.each do |micropost| %>
        <div class="col-md-6 post-cards">
          <div class="card mb-2">
            <% if micropost.image.url %>
              <%= link_to image_tag(micropost.image.to_s, class: "card-img-top stretched-link", alt: "投稿画像"), micropost %>
            <% end %>
            <div class="card-body">
              <div class="post-user">
                <% if micropost.user.avatar? %>
                  <%= link_to image_tag(micropost.user.avatar.to_s, size: "40x40", class: "post-avatar rounded-circle mb-3", alt: "avatar image"), micropost.user %>
                <% else %>
                  <%= link_to image_tag('no_avatar.png', size: "40x40", class: "post-avatar rounded-circle mb-3", alt: "avatar image"), micropost.user %>
                <% end %>
                <%= link_to micropost.user.name, micropost.user, class: "post-avatar post-name text-dark" %>
                <% if micropost.address %>
                  <small class="post-address ml-2"><%= micropost.address %></small>
                <% end %>
                <% if micropost.arrived_at == "昼" %>
                  <span style="color: Tomato">
                    <i class="fas fa-sun arrived-icon"></i>
                  </span>
                <% elsif micropost.arrived_at == "夜" %>
                  <span style="color: Darkblue">
                    <i class="fas fa-moon arrived-icon"></i>
                  <span>
                <% else %>
                  <div></div>
                <% end %>
              </div>
              <div class="post-content ml-2 mt-1 mb-5">
                <%= micropost.content %>
              </div>
              <div class="post-info ml-2">
                <small class="text-muted">
                  <% if current_user.like?(micropost) %>
                    <i class="fas fa-heart fa-lg liked-heart"></i>
                  <% else %>
                    <i class="fas fa-heart fa-lg muted-heart"></i>
                  <% end %>
                  <%= micropost.liked_users.count %>
                </small>
                <small class="comment-info ml-3 text-muted">
                  <i class="fas fa-comment-alt fa-lg commented-user"></i>
                    <%= micropost.commented_users.count %>
                </small>
                <small class="text-muted float-right"><%= micropost.created_at.strftime('%m/%d %H:%M') %></small>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="search-next">
      <%= paginate @microposts %>
    </div>
  <% end %>
</div>

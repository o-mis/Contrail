<div class="tabs">
  <%# タブ %>
  <div class="nav justify-content-end mr-4">
    <select id="tab-select">
      <option value="#tab1">フィード</option>
      <option value="#tab2">人気</option>
      <option value="#tab3">新着</option>
    </select>
  </div>

  <%# パネル部分 %>
    <%# フィード %>
    <div id="tab1" class="tab-contents mt-4">
      <% if @feed.any? %>
        <div class="row mb-2">
          <% @feed.each do |micropost| %>
            <div class="card-group col-md-4 mx-auto">
              <div class="card shadow-sm mb-2">
                <% if micropost.image.url %>
                  <%= link_to image_tag(micropost.image.to_s, class: "card-img-top", alt: "投稿画像"), micropost %>
                <% end %>
                <div class="card-body">
                  <div class="post-user">
                    <% if micropost.user.avatar? %>
                      <%= link_to image_tag(micropost.user.avatar.to_s, size: "40x40", class: "post-avatar rounded-circle mb-3", alt: "avatar image"), micropost.user %>
                    <% else %>
                      <%= link_to image_tag('no_avatar.png', size: "40x40", class: "post-avatar rounded-circle mb-3", alt: "avatar image"), micropost.user %>
                    <% end %>
                    <%= link_to micropost.user.name, micropost.user, class: "post-avatar post-name text-dark" %>
                    <% if micropost.address %>
                      <small class="post-address ml-2"><%= micropost.address %></small>
                    <% end %>
                    <% if micropost.arrived_at == "昼" %>
                      <span style="color: Tomato">
                        <i class="fas fa-sun arrived-icon"></i>
                      </span>
                    <% elsif micropost.arrived_at == "夜" %>
                      <span style="color: Darkblue">
                        <i class="fas fa-moon arrived-icon"></i>
                      <span>
                    <% else %>
                      <div></div>
                    <% end %>
                  </div>
                  <div class="post-content ml-2 mt-1 mb-4">
                    <%= link_to micropost.content, micropost, class: "text-decoration-none text-dark" %>
                  </div>
                  <div class="mt-2 ml-2 mb-3">
                    <%= render 'microposts/tag_list', tag_list: micropost.tag_list %>
                  </div>
                  <div class="post-info ml-1 d-flex">
                    <div id="micropost-<%= micropost.id %>">
                      <%= render "likes/like", micropost: micropost %>
                    </div>
                    <div class="comment-info ml-3 text-muted">
                      <i class="fas fa-comment-alt fa-lg mt-1 commented-user"></i>
                        <%= micropost.commented_users.count %>
                    </div>
                    <div class="ml-auto"><small class="text-muted float-right"><%= micropost.created_at.strftime('%m/%d %H:%M') %></small></div>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
          <%= paginate @feed %>
        </div>
      <% else %>
        <div class="no-post-info">
          <div class="text-center font-weight-bold mt-5 mb-2">
            投稿がありません
          </div>
          <div class="text-muted text-center">
            投稿したりユーザーをフォローするとそのポストが表示されます
          </div>
        </div>
      <% end %>
    </div>

    <%# 人気投稿 %>
    <div id="tab2" class="tab-contents">
      <div class="row mb-2">
        <% @popular.each do |micropost| %>
          <div class="card-group col-md-4 mx-auto">
            <div class="card shadow-sm mb-2">
              <% if micropost.image.url %>
                  <%= link_to image_tag(micropost.image.to_s, class: "card-img-top", alt: "投稿画像"), micropost %>
                <% end %>
                <div class="card-body">
                  <div class="post-user">
                    <% if micropost.user.avatar? %>
                      <%= link_to image_tag(micropost.user.avatar.to_s, size: "40x40", class: "post-avatar rounded-circle mb-3", alt: "avatar image"), micropost.user %>
                    <% else %>
                      <%= link_to image_tag('no_avatar.png', size: "40x40", class: "post-avatar rounded-circle mb-3", alt: "avatar image"), micropost.user %>
                    <% end %>
                    <%= link_to micropost.user.name, micropost.user, class: "post-avatar post-name text-dark" %>
                    <% if micropost.address %>
                      <small class="post-address ml-2"><%= micropost.address %></small>
                    <% end %>
                    <% if micropost.arrived_at == "昼" %>
                      <span style="color: Tomato">
                        <i class="fas fa-sun arrived-icon"></i>
                      </span>
                    <% elsif micropost.arrived_at == "夜" %>
                      <span style="color: Darkblue">
                        <i class="fas fa-moon arrived-icon"></i>
                      <span>
                    <% else %>
                      <div></div>
                    <% end %>
                  </div>
                  <div class="post-content ml-2 mt-1">
                    <%= link_to micropost.content, micropost, class: "text-decoration-none text-dark" %>
                  </div>
                  <div class="mt-2 ml-2 mb-3">
                    <%= render 'microposts/tag_list', tag_list: micropost.tag_list %>
                  </div>
                  <div class="post-info ml-1 d-flex">
                    <div id="micropost-<%= micropost.id %>">
                      <%= render "likes/like", micropost: micropost %>
                    </div>
                    <div class="comment-info ml-3 text-muted">
                      <i class="fas fa-comment-alt fa-lg pt-2 commented-user"></i>
                        <%= micropost.commented_users.count %>
                    </div>
                    <div class="ml-auto"><small class="text-muted float-right"><%= micropost.created_at.strftime('%m/%d %H:%M') %></small></div>
                  </div>
                </div>
              </div>
            </div>
        <% end %>
        <%= paginate @popular %>
      </div>
    </div>

    <%# 新着投稿 %>
    <div id="tab3" class="tab-contents">
      <div class="row">
        <% @latest.each do |micropost| %>
          <div class="card-group col-md-4 mx-auto">
            <div class="card shadow-sm mb-2">
              <% if micropost.image.url %>
                <%= link_to image_tag(micropost.image.to_s, class: "card-img-top", alt: "投稿画像"), micropost %>
              <% end %>
              <div class="card-body">
                <div class="post-user">
                  <% if micropost.user.avatar? %>
                    <%= link_to image_tag(micropost.user.avatar.to_s, size: "40x40", class: "post-avatar rounded-circle mb-3", alt: "avatar image"), micropost.user %>
                  <% else %>
                    <%= link_to image_tag('no_avatar.png', size: "40x40", class: "post-avatar rounded-circle mb-3", alt: "avatar image"), micropost.user %>
                  <% end %>
                  <%= link_to micropost.user.name, micropost.user, class: "post-avatar post-name text-dark" %>
                  <% if micropost.address %>
                    <small class="post-address ml-2"><%= micropost.address %></small>
                  <% end %>
                  <% if micropost.arrived_at == "昼" %>
                    <span style="color: Tomato">
                      <i class="fas fa-sun arrived-icon"></i>
                    </span>
                  <% elsif micropost.arrived_at == "夜" %>
                    <span style="color: Darkblue">
                      <i class="fas fa-moon arrived-icon"></i>
                    <span>
                  <% else %>
                    <div></div>
                  <% end %>
                </div>
                <div class="post-content ml-2 mt-1">
                  <%= link_to micropost.content, micropost, class: "text-decoration-none text-dark" %>
                </div>
                <div class="mt-2 ml-2 mb-3">
                  <%= render 'microposts/tag_list', tag_list: micropost.tag_list %>
                </div>
                <div class="post-info ml-1 d-flex">
                  <div id="micropost-<%= micropost.id %>">
                    <%= render "likes/like", micropost: micropost %>
                  </div>
                  <div class="comment-info ml-3 text-muted">
                    <i class="fas fa-comment-alt fa-lg pt-1 commented-user"></i>
                      <%= micropost.commented_users.count %>
                  </div>
                  <div class="ml-auto"><small class="text-muted float-right"><%= micropost.created_at.strftime('%m/%d %H:%M') %></small></div>
                </div>
              </div>
            </div>
          </div>
        <% end %>
        <%= paginate @latest %>
      </div>
    </div>
</div>

<%= render 'microposts/tab_function' %>